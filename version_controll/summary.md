# 关于代码提交

一般代码会被分成 开发分支 和 发布分支。发布分支上的代码是必须经过测试通过的代码，才可以提交到发布分支上，一般不需要直接提交代码到发布分支上。开发分支是在开发一个功能或者模块开始的时候，从发布分支上拉出来的分支。

1. 不运行提交不能工作的代码

  意思是说你提交的代码不能引起其他人不能编译或者不能正常运行。

2. 代码要及时提交

  在满足 1 的条件下，尽量尽早及时提交代码。有人从项目开始到整个功能完成才开始提交代码，结果合并代码的时候碰见了N多问题。也有人代码没有及时提交，搞了几天的代码由于电脑坏了，只能从头再写一遍。

3. 不堆攒代码一起提交

  和 2 所说的及时提交大概一个意思。在项目开始的时候，你可能在短时间内完成了大部分代码，这些代码并不一定是完整的，但是在开发分支中，只要在能满足 1 的要求下，是可以提交的。这样保证在完成一个大的功能模块的一个小里程碑的时候，能及时提交代码。

4. 一次提交只解决一个问题

  一次提交只解决一个问题。一次提交只修改一个bug，多个bug分成多次提交。
  
5. 提交尽量干净

  干净的意思就是不要提交跟本次修改没有任何关系的代码。比如说你修改了一个bug，在修改的过程中，你修改了 N 多个文件的代码，但最终修改这个 bug 只需要修改一个文件的一行代码，那么只能提交这一行代码，其他在修改 bug 过程中改动的代码不能提交。这样的目的是方便别人 review 代码。别人拿到代码一看，很清晰的看出了你修改了哪一行，增加了什么，删除了什么，很简单明了。如果把很多没有关系的代码一起提交，在后期查找问题，追溯代码就会非常困难。
  
6. 碰见没有格式化的代码怎么办

  跟 5 说的大概一个意思。当你在一个没有格式化的代码里修改完 bug 后，提交的时候尽量保持提交的干净。不要把其他没有的因为格式化引起的代码变化提交了。如果你是在看不下去，可以单独提交一次格式化代码，然后加上备注，别人在看代码的时候就知道这次提交没有任何修改，只是格式化，基本上不会出现问题，在追溯代码的时候，可以简单的跳过去。
  
7. 提交前格式化

  提交代码前记得格式化代码。团队工作的时候，尽量保持团结成员的格式化工具或者格式化规则一致。当出现格式化工具或格式化规则不一致时，作为提交者，需要记住的是，你只能格式化你的代码。一个文件有 100 行，你修改了其中的 10 行，你只能格式化这 10 行，不能格式化整个文件。